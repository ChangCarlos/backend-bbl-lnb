generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Country {
  id        String   @id @default(uuid())
  
  countryKey  String   @unique @map("country_key")
  name        String   @map("country_name")
  
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  
  leagues League[]
  
  @@map("countries")
  @@index([countryKey])
}


model FixtureStatistic {
  id        String   @id @default(uuid())
  
  fixtureId String
  fixture   Fixture  @relation(fields: [fixtureId], references: [id], onDelete: Cascade)
  
  type      String
  home      String
  away      String
  
  createdAt DateTime @default(now()) @map("created_at")
  
  @@map("fixture_statistics")
  @@index([fixtureId])
}


model Fixture {
  id        String   @id @default(uuid())
  
  eventKey        String   @unique @map("event_key")
  eventDate       String   @map("event_date")
  eventTime       String   @map("event_time")
  eventStatus     String   @map("event_status")
  eventQuarter    String?  @map("event_quarter")
  eventLive       String   @default("0") @map("event_live")
  finalResult     String?  @map("event_final_result")
  
  homeTeamKey     String   @map("home_team_key")
  homeTeam        Team     @relation("HomeTeam", fields: [homeTeamKey], references: [teamKey], onDelete: Cascade)
  
  awayTeamKey     String   @map("away_team_key")
  awayTeam        Team     @relation("AwayTeam", fields: [awayTeamKey], references: [teamKey], onDelete: Cascade)
  
  leagueKey       String   @map("league_key")
  league          League   @relation(fields: [leagueKey], references: [leagueKey], onDelete: Cascade)
  leagueRound     String?  @map("league_round")
  leagueSeason    String?  @map("league_season")
  
  homeTeamLogo    String?  @map("home_team_logo")
  awayTeamLogo    String?  @map("away_team_logo")
  
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  
  scores           Score[]
  statistics       FixtureStatistic[]
  homeLineup       Lineup[]           @relation("HomeLineup")
  awayLineup       Lineup[]           @relation("AwayLineup")
  playerStatistics PlayerStatistic[]
  
  @@map("fixtures")
  @@index([eventKey])
  @@index([homeTeamKey])
  @@index([awayTeamKey])
  @@index([leagueKey])
  @@index([eventDate])
  @@index([eventStatus])
}


model HeadToHead {
  id        String   @id @default(uuid())
  
  firstTeamKey  String   @map("first_team_key")
  firstTeam     Team     @relation("FirstTeamH2H", fields: [firstTeamKey], references: [teamKey], onDelete: Cascade)
  
  secondTeamKey String   @map("second_team_key")
  secondTeam    Team     @relation("SecondTeamH2H", fields: [secondTeamKey], references: [teamKey], onDelete: Cascade)
  
  eventKey          String   @map("event_key")
  eventDate         String   @map("event_date")
  eventTime         String   @map("event_time")
  eventHomeTeam     String   @map("event_home_team")
  homeTeamKey       String   @map("home_team_key")
  eventAwayTeam     String   @map("event_away_team")
  awayTeamKey       String   @map("away_team_key")
  eventFinalResult  String?  @map("event_final_result")
  eventStatus       String   @map("event_status")
  
  countryName   String   @map("country_name")
  leagueName    String   @map("league_name")
  leagueKey     String   @map("league_key")
  leagueRound   String?  @map("league_round")
  leagueSeason  String   @map("league_season")
  eventLive     String   @default("0") @map("event_live")
  
  recordType    String
  
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  
  @@map("head_to_head")
  @@unique([eventKey, firstTeamKey, secondTeamKey, recordType])
  @@index([firstTeamKey])
  @@index([secondTeamKey])
  @@index([eventKey])
  @@index([recordType])
}


model League {
  id        String   @id @default(uuid())
  
  leagueKey String   @unique @map("league_key")
  name      String   @map("league_name")
  
  countryKey String  @map("country_key")
  country    Country @relation(fields: [countryKey], references: [countryKey], onDelete: Cascade)
  
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  
  teams      Team[]
  fixtures   Fixture[]
  standings  Standing[]
  
  @@map("leagues")
  @@index([countryKey])
  @@index([leagueKey])
}


model Lineup {
  id        String   @id @default(uuid())
  
  fixtureId String
  fixture   Fixture  @relation("HomeLineup", fields: [fixtureId], references: [id], onDelete: Cascade)
  
  awayFixtureId String?
  awayFixture   Fixture? @relation("AwayLineup", fields: [awayFixtureId], references: [id], onDelete: Cascade)
  
  playerId  String
  player    Player   @relation(fields: [playerId], references: [playerId], onDelete: Cascade)
  
  teamType  String
  type      String
  
  createdAt DateTime @default(now()) @map("created_at")
  
  @@map("lineups")
  @@index([fixtureId])
  @@index([playerId])
}


model PlayerStatistic {
  id        String   @id @default(uuid())
  
  fixtureId String
  fixture   Fixture  @relation(fields: [fixtureId], references: [id], onDelete: Cascade)
  
  playerId  String
  player    Player   @relation(fields: [playerId], references: [playerId], onDelete: Cascade)
  
  teamType  String
  
  assists               String? @map("player_assists")
  blocks                String? @map("player_blocks")
  defenseRebounds       String? @map("player_defense_rebounds")
  fieldGoalsAttempts    String? @map("player_field_goals_attempts")
  fieldGoalsMade        String? @map("player_field_goals_made")
  freethrowsAttempts    String? @map("player_freethrows_goals_attempts")
  freethrowsMade        String? @map("player_freethrows_goals_made")
  minutes               String? @map("player_minutes")
  offenceRebounds       String? @map("player_offence_rebounds")
  onCourt               String? @map("player_oncourt")
  personalFouls         String? @map("player_personal_fouls")
  plusMinus             String? @map("player_plus_minus")
  position              String? @map("player_position")
  points                String? @map("player_points")
  steals                String? @map("player_steals")
  threepointAttempts    String? @map("player_threepoint_goals_attempts")
  threepointMade        String? @map("player_threepoint_goals_made")
  totalRebounds         String? @map("player_total_rebounds")
  turnovers             String? @map("player_turnovers")
  
  createdAt DateTime @default(now()) @map("created_at")
  
  @@map("player_statistics")
  @@index([fixtureId])
  @@index([playerId])
}


model Player {
  id        String   @id @default(uuid())
  
  playerId  String   @unique @map("player_id")
  name      String   @map("player_name")
  
  teamKey   String?  @map("team_key")
  team      Team?    @relation(fields: [teamKey], references: [teamKey], onDelete: SetNull)
  
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  
  lineups     Lineup[]
  statistics  PlayerStatistic[]
  
  @@map("players")
  @@index([playerId])
  @@index([teamKey])
}


model Score {
  id        String   @id @default(uuid())
  
  fixtureId String
  fixture   Fixture  @relation(fields: [fixtureId], references: [id], onDelete: Cascade)
  
  quarter   String
  scoreHome String   @map("score_home")
  scoreAway String   @map("score_away")
  
  createdAt DateTime @default(now()) @map("created_at")
  
  @@map("scores")
  @@index([fixtureId])
}


model Standing {
  id        String   @id @default(uuid())
  
  standingPlace         String  @map("standing_place")
  standingPlaceType     String? @map("standing_place_type")
  standingTeam          String  @map("standing_team")
  
  standingP    String  @map("standing_p")
  standingW    String  @map("standing_w")
  standingWO   String  @map("standing_wo")
  standingL    String  @map("standing_l")
  standingLO   String  @map("standing_lo")
  standingF    String  @map("standing_f")
  standingA    String  @map("standing_a")
  standingPCT  String? @map("standing_pct")
  
  teamKey      String  @map("team_key")
  team         Team    @relation(fields: [teamKey], references: [teamKey], onDelete: Cascade)
  
  leagueKey    String  @map("league_key")
  league       League  @relation(fields: [leagueKey], references: [leagueKey], onDelete: Cascade)
  
  leagueSeason String  @map("league_season")
  leagueRound  String? @map("league_round")
  
  standingUpdated String?  @map("standing_updated")
  createdAt       DateTime @default(now()) @map("created_at")
  updatedAt       DateTime @updatedAt @map("updated_at")
  
  @@map("standings")
  @@unique([teamKey, leagueKey, leagueSeason, leagueRound])
  @@index([teamKey])
  @@index([leagueKey])
  @@index([leagueSeason])
}


model Team {
  id        String   @id @default(uuid())
  teamKey   String   @unique @map("team_key") 
  name      String   @map("team_name")
  logo      String?  @map("team_logo")
  
  leagueKey String   @map("league_key")
  league    League   @relation(fields: [leagueKey], references: [leagueKey], onDelete: Cascade)
  
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  
  homeFixtures     Fixture[]     @relation("HomeTeam")
  awayFixtures     Fixture[]     @relation("AwayTeam")
  standings        Standing[]
  players          Player[]
  h2hFirstTeam     HeadToHead[]  @relation("FirstTeamH2H")
  h2hSecondTeam    HeadToHead[]  @relation("SecondTeamH2H")
  
  @@map("teams")
  @@index([teamKey])
  @@index([leagueKey])
}


model User {
  id        String   @id @default(uuid())
  email     String   @unique
  password  String 
  name      String
  role      String   @default("USER")
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  
  @@map("users")
  @@index([email])
}